<%= error_messages_for 'analysis_template' %>
<table class="show_table">
<tr>
<th><label for="analysis_template_analysis_template_name"><%=getLongName('analysis_templates','analysis_template_name')%></label></th><td><%= text_field 'analysis_template', 'analysis_template_name'  %></td>
</tr>
<tr>
<th><label for="business_partner_name">取引先</label></th><td><%= text_field_tag 'business_partner_name', @analysis_template.business_partner.blank? ? "" : @analysis_template.business_partner.business_partner_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %>
  <input type=button value='...' onClick="disp_wide('<%=url_for :controller => 'business_partner', :action => 'list', :popup => 1, :flg => 'upper_or_down' %>');return false;" />
  <input type=button value='クリア' onClick="clearBp();return false;" />
  <%= hidden_field 'analysis_template', 'business_partner_id' %></td>
</tr>
<tr>
<th><label for="bp_pic_name">取引先担当</label></th><td><%= text_field_tag 'bp_pic_name', @analysis_template.bp_pic.blank? ? "" : @analysis_template.bp_pic.bp_pic_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %>
  <input type=button value='...' onClick="openBpPicList();return false;" />
  <input type=button value='クリア' onClick="clearBpPic();return false;" />
  <%= hidden_field 'analysis_template', 'bp_pic_id' %></td>
</tr>
<tr>
<th><label for="analysis_template_memo"><%=getLongName('analysis_templates','memo')%></label></th><td><%= resizable_area 'analysis_template', 'memo'  %></td>
</tr>
</table>


<script type="text/javascript">
<!--
function openBpPicList() {
    disp_wide('<%=url_for :controller => 'bp_pic', :action => 'list', :popup =>1 %>' + '/' + document.getElementById("analysis_template_business_partner_id").value)
}

document.setBp = function(bp) {
    document.getElementById("analysis_template_business_partner_id").value = bp.id;
    document.getElementById("business_partner_name").value = bp.business_partner_name;
    document.getElementById("analysis_template_bp_pic_id").value = "";
    document.getElementById("bp_pic_name").value = "";
}

function clearBp(){
    document.getElementById("analysis_template_business_partner_id").value = "";
    document.getElementById("business_partner_name").value = "";
    document.getElementById("analysis_template_bp_pic_id").value = "";
    document.getElementById("bp_pic_name").value = "";
}

document.setBpPic = function(bp_pic){
    document.getElementById("analysis_template_bp_pic_id").value = bp_pic.id;
    document.getElementById("bp_pic_name").value = bp_pic.bp_pic_name;
}

function clearBpPic(){
    document.getElementById("analysis_template_bp_pic_id").value = "";
    document.getElementById("bp_pic_name").value = "";
}


// -->
</script>
